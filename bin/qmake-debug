#!/bin/bash

if [ -z ${QMAKE:-} ]
then
    if [ -x "$HOME/Qt/5.5/clang_64/bin/qmake" ]
    then
        QMAKE="$HOME/Qt/5.5/clang_64/bin/qmake"
    else
        QMAKE=$(which qmake)
    fi
fi

SPEC=${SPEC:-linux-clang-libc++}

set -e -x
case "$SPEC" in
     linux*) "$QMAKE" \
                 -spec "$SPEC" \
                 CONFIG+=debug \
                 DEFINES+=USE_GOOGLE_PROFILER \
                 QMAKE_LFLAGS*="$LFLAGS" \
                 "$@"
             ;;
          *) "$QMAKE" -spec "$SPEC" CONFIG+=debug "$@"
             ;;
esac
