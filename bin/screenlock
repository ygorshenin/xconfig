#!/bin/bash

exists() {
  which "$1" >/dev/null 2>&1
}

if ! exists setxkbmap ; then
    echo "Can't find setxkbmap." 2>&1
    exit -1
fi

if ! exists xscreensaver-command ; then
    echo "Can't find xscreensaver-command." 2>&1
    exit -1
fi

setxkbmap us

LAYOUT=/tmp/.layout
if [ -p "$LAYOUT" ]; then
    echo "us" >"$LAYOUT" &
fi

xscreensaver-command -lock >/dev/null 2>&1
